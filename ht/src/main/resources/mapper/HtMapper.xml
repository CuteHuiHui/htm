<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 映射文件的命名空间namespace的值，与之对应的映射接口的全类名 -->
<mapper namespace="com.yc.ht.mapper.HtMapper">
	<!-- <select id="findUser" parameterType="User" resultType="User">
		select * from users where password=#{password} and name=#{name} or password=#{password} and id=#{name}
	</select>
	
	分页
	<resultMap type="PaginationBean" id="PaginationBeanMap">
		<result column="pageSize" property="pageSize" />
		<result column="currPage" property="currPage" />
		<collection property="rows"
			column="{pageSize=pageSize,currPage=currPage}" ofType="User"
			select="getPaginationUser" />
	</resultMap>

	<select id="getPartUser" parameterType="PaginationBean"
		resultMap="PaginationBeanMap" useCache="false" flushCache="true">
		select count(1) total,ceil(count(1)/${pageSize}) totalPage,
		${pageSize} pageSize,${currPage} currPage from users
	</select>

	<select id="getPaginationUser" resultType="User" useCache="false" flushCache="true">
		select * from
		(select n.*,rownum rn from (select *
		from users order by 1) n
		where ${pageSize} *
		${currPage} >= rownum) where rn > ( ${currPage} - 1) * ${pageSize}
	</select>
	
	更新指定人员信息
	<update id="updateUser" parameterType="User">
		update users set name=#{name},birthday=#{birthday},
		gender=#{gender},career=#{career},address=#{address},
		mobile=#{mobile},
		picpath=<choose><when test="picpath!=null">#{picpath}</when><otherwise>'image/not_pic.jpg'</otherwise></choose> where id=#{id}
	</update> -->
	
</mapper>